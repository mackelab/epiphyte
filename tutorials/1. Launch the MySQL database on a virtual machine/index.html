
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mackelab.github.io/Epiphyte/tutorials/1.%20Launch%20the%20MySQL%20database%20on%20a%20virtual%20machine/">
      
      
        <link rel="prev" href="../Launch%20the%20MySQL%20database%20locally/">
      
      
        <link rel="next" href="../2.%20%28Optional%29%20Add%20MinIO%20to%20an%20existing%20virtual%20machine/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Launch the MySQL database on a virtual machine - Epiphyte</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial-launch-the-mysql-database-on-a-virtual-machine" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Epiphyte" class="md-header__button md-logo" aria-label="Epiphyte" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Epiphyte
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Launch the MySQL database on a virtual machine
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Epiphyte" class="md-nav__button md-logo" aria-label="Epiphyte" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Epiphyte
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Launch%20the%20MySQL%20database%20locally/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch the MySQL database locally
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Launch the MySQL database on a virtual machine
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Launch the MySQL database on a virtual machine
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-configure-the-vm" class="md-nav__link">
    <span class="md-ellipsis">
      1. Configure the VM
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-install-docker-and-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      2. Install Docker and Docker Compose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-install-the-mysql-client" class="md-nav__link">
    <span class="md-ellipsis">
      3. Install the MySQL client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-set-up-your-docker-environment" class="md-nav__link">
    <span class="md-ellipsis">
      4. Set up your Docker environment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-launch-the-containers-for-mysql-and-minio" class="md-nav__link">
    <span class="md-ellipsis">
      5. Launch the containers for MySQL and MinIO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-create-user-accounts" class="md-nav__link">
    <span class="md-ellipsis">
      6. Create user accounts
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.%20%28Optional%29%20Add%20MinIO%20to%20an%20existing%20virtual%20machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add MinIO to an existing VM (optional)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.%20Install%20Epiphyte/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install Epiphyte
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.%20Configure%20and%20connect%20to%20the%20database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configure and connect to the database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.%20Design%20and%20implement%20the%20database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design and implement the database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.%20Compile%20the%20codebase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compile the codebase
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7.%20%28Optional%29%20Run%20regular%20backups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run regular backups (optional)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8_Add_new_table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add a table to an existing database
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data utilities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Preprocessing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Community
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../acknowledgements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acknowledgements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-configure-the-vm" class="md-nav__link">
    <span class="md-ellipsis">
      1. Configure the VM
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-install-docker-and-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      2. Install Docker and Docker Compose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-install-the-mysql-client" class="md-nav__link">
    <span class="md-ellipsis">
      3. Install the MySQL client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-set-up-your-docker-environment" class="md-nav__link">
    <span class="md-ellipsis">
      4. Set up your Docker environment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-launch-the-containers-for-mysql-and-minio" class="md-nav__link">
    <span class="md-ellipsis">
      5. Launch the containers for MySQL and MinIO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-create-user-accounts" class="md-nav__link">
    <span class="md-ellipsis">
      6. Create user accounts
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="tutorial-launch-the-mysql-database-on-a-virtual-machine">Tutorial: Launch the MySQL database on a virtual machine<a class="headerlink" href="#tutorial-launch-the-mysql-database-on-a-virtual-machine" title="Permanent link">&para;</a></h1>
<h3 id="requirements"><strong>Requirements:</strong><a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h3>
<ul>
<li>a VM running Ubuntu on your hardware of choice.</li>
</ul>
<p>In this tutorial we'll cover how to launch the MySQL database, which will store, retrieve, and manage all (or most) of your data based on the commands and queries issued through DataJoint (covered in later tutorials).</p>
<p>We'll launch the database on a virtual machine (VM). There are many ways to set up a VM, depending on the hardware you'll be using. We launched Epiphyte on a university cluster which has its own specific methodology for launching VMs. We won't go into the details here, as they won't be relevant to most people. </p>
<p>We recommend getting in touch with your system administrator to first set up a VM on your organization's hardware, or if you're doing it yourself from a local computer, to follow tutorials such as <a href="https://www.freecodecamp.org/news/what-is-a-virtual-machine-and-how-to-setup-a-vm-on-windows-linux-and-mac/">this one by freeCodeCamp</a>. We used <a href="http://old-releases.ubuntu.com/releases/20.04.2/">Ubuntu Focal (20.04.2 LTS)</a> for the operating system (OS), and the instructions below assume you are working from a Linux terminal. If your VM is running on another server, you should be able to access it with a command such as <code>ssh -i /path/to/.ssh/&lt;id_rsa.pub&gt; &lt;os&gt;@&lt;ip&gt;</code>.</p>
<p>Whether you're working with a VM set up locally or on a remote server, be sure to allow admin access to anyone who will be managing the database by adding their public SSH keys to the VM  (the folder will be something like <code>~/.ssh/authorized_keys</code>, and you might need to first create the folder if it's not already present). </p>
<p>We received feedback that users setting up their own VM locally ran into an issue regarding EFI Secure Boot and signing the kernel modules. Their proposed fix (<a href="https://superuser.com/questions/1438279/how-to-sign-a-kernel-module-ubuntu-18-04">source</a>):</p>
<p><code>sudo apt install --reinstall virtualbox-dkms</code> </p>
<hr />
<h2 id="1-configure-the-vm">1. Configure the VM<a class="headerlink" href="#1-configure-the-vm" title="Permanent link">&para;</a></h2>
<p>First, enable <code>sudo</code> for your user (e.g. <code>ubuntu</code> if you installed an Ubuntu OS). <strong>You will need to set a password.</strong> Run the commands below from a terminal on your VM:</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo -i
sudo passwd ubuntu
&lt;password&gt;
</pre>

<p>Don't allow <code>sudo</code> without password:</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo -s
cd /etc/sudoers.d
nano 90-cloud-init-users
</pre>

<p>Remove <code>NOPASSWD</code> from the file and save it (<code>NOPASSWD:ALL</code> becomes just <code>ALL</code>).</p>
<p>Unfortunately, it is highly likely that someone somewhere will try to break into your server using brute force attacks. That's why we'll add security with Fail2Ban, which bans IP addresses conducting too many failed login attempts. </p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo apt-get update
sudo apt-get install fail2ban
</pre>

<p>You can edit the default settings at <code>sudo nano /etc/fail2ban/jail.local.save</code> (such as "bantime", the time a host is banned, or "maxretry", the number of failures before getting banned).</p>
<p>Now we'll open the ports we'll use for SSH (port 22), MySQL (port 3306), and MinIO (port 9000, <strong>optional</strong>). We'll activate the Linux firewall, <code>ufw</code>, to enforce these changes.</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo ufw allow 22 
sudo ufw allow 3306 
sudo ufw allow 9000  # optional, if using MinIO
sudo ufw enable
</pre>

<h2 id="2-install-docker-and-docker-compose">2. Install Docker and Docker Compose<a class="headerlink" href="#2-install-docker-and-docker-compose" title="Permanent link">&para;</a></h2>
<p>The next step is to <a href="https://docs.docker.com/get-docker/">install Docker</a> for Linux.</p>
<p>Verify your Docker installation:</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
docker --version
docker run hello-world
</pre>

<p>Next, <a href="https://docs.docker.com/compose/install/">install Docker Compose</a>.</p>
<p>Verify the Docker Compose installation:</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
docker-compose --version
</pre>

<h2 id="3-install-the-mysql-client">3. Install the MySQL client<a class="headerlink" href="#3-install-the-mysql-client" title="Permanent link">&para;</a></h2>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo apt-get install mysql-client
</pre>

<h2 id="4-set-up-your-docker-environment">4. Set up your Docker environment<a class="headerlink" href="#4-set-up-your-docker-environment" title="Permanent link">&para;</a></h2>
<p>Create the directory where your Docker container will run (the folder names below are examples and can be changed, just be consistent with your new name in later steps).</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo mkdir ~/mysql/mysql-docker
sudo chown &lt;user&gt;: ~/mysql/mysql-docker
</pre>

<p>Download the files <a href="https://github.com/mackelab/epiphyte/tree/master/docs/tutorials/docker%20files">from here</a> and place them in your new folder <code>~/mysql/mysql-docker</code> (we use a modified version of the Docker container <a href="https://github.com/datajoint/mysql-docker">provided by DataJoint</a>).</p>
<p><strong>Choose a password for both MySQL and MinIO (optional).</strong></p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo nano datajoint.env.example
</pre>

<p>Insert your password, <code>MYSQL_ROOT_PASSWORD=&lt;password&gt;</code>, and rename the file to <code>datajoint.env</code>.</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
mv datajoint.env.example datajoint.env
</pre>

<p>Do the same for the MinIO file (if using):</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo nano minio.env.example
</pre>

<p>Set <code>MINIO_ROOT_USER=root</code> and insert your password of choice, <code>MINIO_ROOT_PASSWORD=&lt;password&gt;</code>. Rename this file, too.</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
mv minio.env.example minio.env
</pre>

<p>Edit directories as needed in <code>docker-compose.yaml</code> (relevant lines are marked in the file):</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo nano docker-compose.yaml
</pre>

<h2 id="5-launch-the-containers-for-mysql-and-minio">5. Launch the containers for MySQL and MinIO<a class="headerlink" href="#5-launch-the-containers-for-mysql-and-minio" title="Permanent link">&para;</a></h2>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo docker-compose up -d
</pre>

<p>You can now log into your MySQL database! Exciting, but before we log in we still have a few steps to make our new database more secure. We'll start by attaching to our now-running Docker container:</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo docker-compose exec &lt;container name&gt; bash
</pre>

<p>Now run the following command and follow the prompts to add essential security measures to your MySQL installation:</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
mysql_secure_installation
</pre>

<p>And again install Fail2Ban:</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
sudo apt-get update
sudo apt-get install fail2ban
</pre>

<h2 id="6-create-user-accounts">6. Create user accounts<a class="headerlink" href="#6-create-user-accounts" title="Permanent link">&para;</a></h2>
<p>Now for the fun part&mdash;we can finally log into our new MySQL database!</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
mysql -h 127.0.0.1 -u root -p
</pre>

<p>Now you should be operating from a MySQL shell as the root user. Create new user accounts for the people you want to give access to:</p>
<pre style="background-color: #1E1E1E; color: white; padding: 10px; border-radius: 5px; border-left: 5px solid #007bff;">
CREATE USER '&lt;username&gt;'@'%' IDENTIFIED BY '&lt;password&gt;;
GRANT ALL PRIVILEGES ON `&lt;username&gt;\_%`.* TO '&lt;username&gt;'@'%';
</pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.instant", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>